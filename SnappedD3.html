<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.bar rect {
  shape-rendering: crispEdges;
}

.bar text {
  fill: #999999;
}

.axis path, .axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

// Set the base bar color
var color = "yellow";

// A comma-separated list of the compound scores
var years = [0.923,
0.3818,
-0.2732,
0,
-0.3818,
-0.2263,
0,
-0.1725,
-0.2142,
0,
0,
0.079,
0,
0,
0,
0,
-0.4767,
0.4215,
-0.4767,
-0.8071,
0.4767,
0.3612,
0.5423,
0,
0,
-0.34,
-0.168,
0,
-0.507,
0,
0,
0,
0.554,
0,
0.5859,
0.4625,
0.4625,
0,
0,
-0.6408,
0.1504,
0,
0,
0.4588,
0.5859,
0,
0.0345,
-0.3142,
0,
-0.4404,
0,
-0.128,
0,
-0.4019,
0.34,
-0.168,
-0.4019,
-0.168,
0,
0,
0.4215,
0,
0.4019,
0.4019,
0,
0.572,
0,
0.6597,
-0.2263,
-0.0183,
0.6113,
0.5267,
0,
-0.765,
0,
0,
0.3182,
0,
0.2732,
-0.4404,
0.5842,
0,
0,
0.8553,
0.6908,
0,
0,
-0.8797,
0,
0,
-0.2263,
0,
-0.2263,
0.4153,
-0.4767,
0.3612,
-0.9209,
0.7783,
0,
0.4754,
0.7003,
0,
0.296,
-0.4019,
0,
0,
-0.7902,
0,
0,
-0.2023,
0,
-0.2228,
-0.2263,
0.4939,
0,
0.3293,
0,
0,
0,
0.4625,
0,
-0.4019,
0.4215,
0.4215,
-0.168,
0,
0,
0,
0.4625,
0,
0.5093,
0,
0.3506,
0,
0.296,
0,
-0.4019,
-0.8225,
-0.5106,
0,
0,
0.5574,
-0.7208,
0.4404,
-0.168,
-0.6428,
0.9645,
-0.2617,
-0.6728,
0.296,
0,
0,
0.4404,
0,
0,
0.4625,
0,
0.2481,
0,
-0.2263,
-0.1725,
-0.3561,
0,
0.2023,
0,
0,
0,
0,
0.6124,
0.4625,
0,
0.4404,
-0.168,
0,
0.4625,
0.4199,
0.0164,
-0.5106,
0.7579,
0,
0,
0,
0.4625,
0,
0,
0.4625,
0,
0,
0.3954,
0.6369,
0.4588,
0.4019,
0,
-0.4019,
0.4625,
0.7463,
0,
0.4588,
0.4625,
0.4625,
-0.2263,
0,
0,
0,
0.2263,
0,
0,
0.4939,
0,
-0.3863,
0,
0.5267,
0.891,
-0.3182,
0.0772,
0.8102,
-0.2263,
0.3612,
0.2449,
0,
0,
0.4019,
0,
0,
0.636,
0.75,
-0.5859,
0,
0,
0.5267,
0,
0.4625,
0,
0,
0,
0,
0,
0.7501,
-0.3612,
0,
0.4404,
-0.168,
0,
-0.6428,
0,
-0.3182,
0,
0.4625,
0,
0.7783,
0,
0.4404,
-0.7845,
0,
0,
0,
0,
0.4588,
0,
0,
-0.168,
0,
0,
-0.5106,
0.4625,
-0.34,
0.2023,
0.3034,
-0.2263,
0,
0,
-0.5267,
0.4588,
-0.34,
0,
0,
0,
0.4625,
0.5346,
0,
-0.3818,
-0.6269,
0,
0,
0,
-0.4215,
0,
0,
0.2263,
0,
0,
0,
-0.2144,
-0.3875,
-0.1725,
0,
0,
0,
0,
0.9313,
0.9313,
0,
0,
0.8883,
0.7324,
0,
-0.2732,
0,
0,
0,
0.8806,
0.5719,
0,
0.2493,
-0.6908,
0.7739,
0,
0,
0.4625,
0.3818,
0.5897,
0.5859,
-0.5093,
0.6597,
0,
-0.745,
0.7866,
0,
-0.1725,
0.7783,
0.0772,
0.8326,
0.6776,
-0.6801,
0.8715,
0,
0,
0,
0.3919,
0.4767,
-0.4767,
0.68,
-0.1725,
-0.4404,
0.4902,
0.3167,
0.5267,
0,
-0.1725,
0,
0,
0,
0.2263,
-0.6249,
0,
0.4939,
0,
0,
0,
-0.2235,
0,
0.4329,
0.2263,
0,
0,
0,
0.2263,
-0.3291,
0.1531,
0.4625,
0.1322,
0,
0,
-0.168,
0,
0,
0,
0.4242,
0,
0,
0,
0,
-0.1725,
-0.34,
0.6249,
-0.2263,
-0.5719,
0.1901,
0.4939,
-0.2263,
0,
0.5093,
0,
0,
0,
-0.168,
0,
0.4625,
0.4019,
-0.296,
0,
0,
-0.2732,
0.8118,
0,
0,
0,
0,
0.25,
0,
0.6792,
0,
0,
0.9375,
0,
-0.8519,
0,
0,
0.5719,
-0.5106,
0,
0.5023,
0.7506,
0,
-0.2263,
0.6486,
0,
-0.25,
-0.1725,
-0.6808,
0.7783,
0,
0.507,
0.6908,
0,
0,
-0.2263,
-0.168,
0,
0.2263,
0.2263,
0,
0.7906,
0.4404,
0,
0,
-0.2263,
0.6908,
0.3284,
0,
0.5719,
0.6369,
0.2732,
0,
0,
0,
-0.1725,
0,
0.6696,
0,
0,
0,
0.5719,
0.25,
-0.3612,
0.894,
-0.7906,
0.6892,
-0.2177,
0.4625,
0.2732,
0,
0.296,
0,
-0.2263,
0.25,
0,
0,
0.4404,
0,
-0.6633,
0.4625,
-0.296,
0,
-0.4019,
0,
0.2263,
-0.2263,
-0.3612,
0.1027,
0.7783,
0,
-0.2263,
0.9163,
0,
-0.5423,
0,
0,
-0.0772,
0,
0.4625,
0,
0,
0,
0,
0.3612,
0,
-0.1725,
-0.1725,
0,
0,
0,
0.9819,
0.5859,
0,
0.4625,
0.2003,
0.4625,
0,
0.8779,
0,
0,
0.7783,
-0.2263,
-0.1725,
0.7678,
0,
0,
0.2263,
-0.7906,
0,
0.1129,
0,
-0.7351,
-0.2235,
0.5859,
0,
0,
-0.34,
0,
-0.7703,
-0.336,
0.4625,
0,
0.7783,
-0.6249,
-0.4404,
0,
0.4939,
0.7998,
0,
-0.7351,
0,
-0.93,
0,
0,
0,
0,
0.7269,
0,
0,
-0.34,
0.4625,
-0.567,
0,
0,
0,
0.0387,
-0.3612,
-0.3612,
0,
0,
-0.5574,
0.4939,
0,
0.1531,
0,
0,
0,
0.6908,
0.5859,
0,
0,
0.5894,
-0.168,
0.6124,
0.5162,
-0.4019,
-0.1531,
0,
-0.9258,
0.0772,
0,
0,
0,
0.7783,
0,
-0.4767,
0,
-0.041,
0.4738,
0,
0.4625,
0,
0.1511,
0,
0,
0.4019,
0.7574,
0,
0,
-0.168,
-0.1725,
0,
0,
0,
0,
0,
0.2023,
0.4019,
0.1901,
0,
0,
0,
-0.5267,
0.4625,
-0.2263,
0,
0,
-0.168,
0.7506,
0.4625,
0,
0,
0.5719,
0,
-0.2023,
0.5719,
0.6007,
0.5719,
0.5719,
0,
0,
0,
0.4625,
0,
0,
0,
0,
0,
0.373,
-0.7441,
0.296,
0,
0.4625,
0,
0.3293,
-0.1725,
-0.1725,
0,
0,
0.6114,
-0.7579,
0.5994,
0,
-0.1725,
-0.1725,
0.4404,
0,
0,
0.4939,
0.2212,
0,
0.0951,
0,
0,
-0.2183,
0.7783,
0,
0.9079,
0,
0.5423,
0,
0,
0,
-0.1725,
0,
-0.2263,
0,
0,
0.4625,
0,
-0.2263,
0.296,
-0.8679,
-0.2491,
0,
0,
0,
0,
0.296,
-0.4015,
0,
0.7906,
-0.7351,
0,
-0.128,
0.4404,
0.3612,
0,
0.6705,
0,
0,
0.5859,
0,
0,
0,
0,
0,
0.4019,
0.7998,
0,
-0.1725,
0,
0.8979,
0,
0.8326,
-0.4215,
0,
0,
0,
0,
-0.7793,
0,
0,
-0.3365,
0,
0.2263,
0,
-0.1725,
-0.5423,
-0.168,
-0.5216,
0,
0,
-0.1725,
-0.5994,
0.5106,
0,
0,
0,
0.3612,
-0.3,
0.7184,
0,
0.296,
0.5719,
0.5859,
-0.9081,
0,
0,
0,
0,
0,
0,
0.4153,
-0.5789,
0.3293,
0,
-0.2263,
0.0258,
0,
0.5859,
-0.5859,
0,
0.7579,
0.7579,
-0.2263,
0,
0.8176,
-0.168,
0.7783,
0.2263,
-0.128,
0,
0.296,
0.8271,
0.3612,
-0.168,
-0.0772,
0,
0,
0,
-0.2263,
0.5423,
0,
-0.2263,
-0.0954,
-0.3597,
-0.68,
0,
0,
0,
0.7096,
0,
0,
0.7717,
0,
-0.1725,
-0.168,
0.1779,
0,
0,
0.6688,
0.5093,
0,
0,
0.7783,
-0.2263,
-0.7003,
0,
-0.2263,
-0.2263,
0,
-0.1725,
0,
0.296,
-0.4069,
0.4404,
-0.3612,
0,
-0.2263,
0,
0,
-0.168,
-0.802,
0.1759,
0.5894,
0,
0.4019,
0,
0,
0,
-0.34,
-0.2263,
0.7436,
-0.3167,
0,
0,
0.4625,
0.2732,
0.296,
0,
0,
-0.3597,
-0.3597,
0,
0,
0.2732,
0.6007,
0,
-0.1725,
-0.5574,
0,
0,
0,
0,
0,
-0.0772,
0.4019,
-0.2263,
0,
0,
0.3382,
0,
0,
0,
-0.2732,
-0.2263,
0.34,
0.8906,
0.4939,
0.6124,
0,
0,
0.296,
0,
-0.1725,
0.2732,
-0.2263,
0.7717,
-0.1779,
0,
0,
0.5423,
0,
0,
0.6199,
0.4153,
0,
0,
0,
0.4625,
0,
0,
0.2732,
-0.1725,
0,
0,
0.2263,
0,
0,
0.4625,
0,
0.9241,
0.4625,
0.9645,
-0.34,
-0.1725,
0.2263,
0.296,
0,
0,
0,
0.4215,
0,
0,
-0.1725,
0,
0,
0,
-0.1531,
0,
-0.6597,
0.7783,
-0.296,
-0.2183,
0,
0,
0,
-0.9421,
-0.2263,
0.2263,
0,
0,
0,
0,
0,
-0.745,
0.4215,
0,
-0.5994,
0,
0,
0.6209,
-0.168,
0.25,
0.3612,
0,
0.4625,
0,
0,
-0.5106,
0,
0.899,
-0.745,
0,
0.2263,
-0.296,
0.4215,
0,
0,
0,
-0.34,
0,
0.5994,
0,
0,
0.4625,
0,
-0.2263,
-0.3597,
0.5423,
0,
0.5574,
0.34,
-0.8043,
-0.8043,
-0.3089,
0.743,
-0.34,
0,
0.1531,
0,
0,
0.4804,
0,
0,
0.4625,
0,
0,
0,
0,
0,
0.2732,
0.6696,
-0.1725,
0,
-0.168,
-0.2263,
0.25,
0.6776,
0.0772,
0,
0,
-0.6124,
0.3382,
0.296,
-0.1725,
0.2023,
0,
0,
-0.8481,
0.5093,
0,
0,
-0.6943,
0,
0.2263,
-0.296,
-0.168,
-0.1979,
0.1862,
0,
0,
0.5894,
0,
0.8436,
-0.1477,
0,
-0.1725,
0,
0,
0.5719,
-0.4926,
0.5739,
0.7632,
0,
0,
0,
-0.34,
0,
-0.3818,
0,
0.4588,
0.7506,
0,
0,
0.658,
0,
0,
0.2732,
0.4404,
0.5423,
0,
0,
0.373,
0.373,
0.296,
0.25,
0,
0,
0,
0,
0,
0,
0.2225,
0.5093,
0.4404,
-0.1725,
-0.4019,
0.5994,
0,
0,
0,
0.5719,
-0.4019,
0,
0.4625,
0,
-0.5647,
-0.5255,
0,
-0.168,
0,
-0.8251,
0,
0.9229,
0.0688,
0,
0.6227,
0.5837,
0.6776,
0.4625,
0.3869,
0.5093,
0,
0,
0.7783,
-0.34,
-0.7506,
-0.7506,
0,
0.5719,
0.5093,
0,
-0.168,
-0.2263,
-0.1779,
0,
0.5719,
0,
0.8338,
0.6509,
0.5719,
-0.1725,
-0.7469,
-0.2263,
-0.168,
-0.2235,
-0.25,
0.3612,
0.3612,
-0.168,
0.4625,
0,
0,
-0.4574,
-0.5994,
0,
0,
0.7125,
0,
0,
0,
0.7184,
-0.5994,
-0.34,
0,
0,
0,
-0.2263,
-0.4023,
0,
0,
0,
0,
0,
0.4625,
0.4751,
0.4939,
0,
-0.6115,
-0.1531,
0.2732,
0.4995,
-0.6414,
-0.1725,
0.4173,
0,
0.4625,
-0.34,
0,
0,
0.8326,
0,
0.4625,
0,
-0.1725,
-0.168,
0.5095,
0.4625,
0,
-0.6369,
0,
-0.9201,
0.4588,
0.2263,
0.3586,
0,
0,
0,
0,
0.4625,
0.6688,
0.6808,
-0.1725,
0,
0.296,
-0.1725,
0,
-0.5574,
0,
0,
0.4625,
0.4625,
-0.508,
0,
-0.34,
0,
0.2714,
0,
-0.6182,
0.5647,
0.4625,
0,
0.9196,
0.4215,
-0.1725,
-0.0516,
0.5894,
0.2263,
0.3612,
-0.7096,
0,
-0.9062,
-0.3597,
0.4404,
0.296,
0,
0.4404,
0,
0,
0.296,
0.5935,
-0.5994,
0.2263,
0.7184,
-0.1725,
0.7579,
0,
-0.5994,
0,
0,
0,
0.5267,
0,
-0.4405,
0.4404,
0.5719,
-0.2244,
0.0602,
0,
-0.1725,
-0.4019,
0.5894,
-0.0387,
0,
0.5499,
-0.5994,
0,
0,
0,
-0.1725,
0.4996,
0,
0.2263,
0.4625,
-0.93,
-0.5994,
0,
0,
0,
0,
-0.0772,
-0.6739,
0,
-0.1725,
0.4625,
0,
0,
-0.6669,
0,
0.4625,
0,
-0.1725,
-0.1725,
0,
0,
0.5951,
0.4939,
-0.1531,
0,
0,
0,
0,
0,
0.9259,
-0.1725,
0,
0.2732,
0.4404,
-0.3254,
0.7579,
0.8957,
0.2263,
-0.1421,
0,
0.7184,
-0.6705,
0,
-0.1725,
0.9151,
0.7579,
0.4404,
0,
0,
-0.1027,
0,
0,
0,
0,
-0.813,
0,
0,
0.4404,
-0.1725,
0,
0.4625,
0.836,
0,
-0.0772,
0.4625,
0,
-0.7351,
0.5719,
-0.85,
0,
-0.1725,
-0.1725,
0.5499,
0,
0,
-0.5423,
0,
0,
0.7579,
0.4019,
0,
-0.2183,
0,
0,
-0.9562,
0,
0.4404,
0.5523,
0.5267,
0.0258,
0.4939,
0,
0,
-0.0516,
0.0258,
0.6408,
0,
0.1779,
0,
-0.5896,
0.4625,
0.8326,
0.4404,
0,
0,
0,
0.8775,
0,
-0.2263,
0.4939,
0,
0,
0,
0.34,
0,
0,
0.296,
0,
0.5894,
0,
0,
0.4625,
0.4153,
0,
0,
0,
0.7817,
-0.1725,
0.7783,
-0.1725,
0.5719,
0,
0,
-0.2263,
0,
0,
0.5719,
0,
0,
0,
0.4215,
0.4215,
0,
0.5719,
-0.1531,
0.4404,
-0.2263,
0.3612,
-0.34,
0.4625,
-0.2263,
0.9276,
-0.6428,
0,
0,
0,
0.4588,
0,
0,
0,
0,
-0.1725,
0,
0.6249,
-0.1725,
-0.1725,
-0.0516,
0.4215,
0,
0,
0,
0,
0.4588,
0.4153,
0.7964,
0,
-0.34,
0,
0.5157,
0,
0.4153,
0.5574,
0,
0.5719,
0,
0,
0,
0,
0,
0.8007,
0,
-0.4405,
0.2732,
0.4625,
0.2732,
0,
0,
0,
-0.2263,
0.2263,
0,
0.4625,
-0.1725,
0,
0.5719,
0.2263,
0.9259,
0,
0.7556,
0,
0.5719,
0,
0.4625,
0,
-0.3221,
-0.4404,
-0.4404,
-0.168,
0.6705,
0,
0,
0,
0.7935,
0,
-0.168,
0,
0,
-0.34,
0.2263,
0,
-0.2263,
0,
0,
0.9259,
0,
0.5106,
-0.4019,
-0.2263,
0,
0.3612,
0,
0,
-0.4019,
0,
0.2263,
0,
-0.4215,
0.8201,
0,
-0.2808,
0.5719,
0.7998,
0.7003,
0,
0.8979,
0,
-0.6124,
0.8555,
0.4625,
0.4625,
0,
-0.1725,
-0.2263,
-0.1531,
0,
0,
-0.9055,
-0.6124,
0,
-0.4019,
0,
-0.0258,
-0.2732,
0.2732,
0.126,
0.8776,
0.2263,
0.4588,
0,
-0.1725,
-0.1725,
0.6124,
0,
0,
0.8156,
-0.1725,
-0.2263,
0.5719,
0.0772,
0.4153,
0.4215,
0.4625,
-0.1725,
0,
-0.168,
0.4625,
0,
0.7184,
0.4625,
0.4625,
0,
0,
0.4625,
-0.7088,
0,
0.5859,
-0.7088,
0,
0,
0.4404,
-0.7184,
0,
0.7902,
0,
-0.168,
0.4588,
0.5994,
0,
0.2263,
-0.1027,
0,
0.5423,
-0.1725,
0,
-0.1725,
0,
0.2714,
0.5093,
0.4019,
0.4588,
0.7845,
0.4625,
-0.2263,
0,
0,
0,
-0.1509,
0.4404,
0,
0.5719,
-0.2263,
0.6124,
0.4019,
0.713,
0,
0.7256,
0.4215,
0.4404,
-0.2263,
0.7003,
0.1531,
0,
0,
-0.4767,
-0.4939,
0,
0,
-0.4588,
0,
0,
-0.168,
0.8555,
0.6295,
0.2263,
0.2023,
0.4625,
-0.168,
-0.3818,
-0.0516,
0,
0,
0.4625,
0,
-0.7351,
0.5719,
0,
0.8555,
0,
0.4019,
-0.5574,
0.7579,
-0.7469,
0,
-0.5859,
-0.1725,
0.4625,
-0.168,
-0.6249,
0,
0.5093,
0.5423,
0,
0.7003,
-0.5106,
0.4404,
0.7574,
-0.4767,
0.7531,
0,
-0.4924,
0,
-0.2263,
0.5423,
0.7783,
-0.3612,
0.2263,
0.4625,
0,
0.5994,
0,
-0.1027,
0.2732,
0.4574,
-0.6588,
0,
0.4404,
0.4404,
0.2263,
0,
0.8555,
-0.8946,
-0.34,
0.837,
0,
0,
0.5255,
0.5949,
0.4215,
0,
0,
0.2263,
-0.1531,
0.7906,
0,
-0.168,
0,
0.5423,
0.2263,
0.2263,
-0.0772,
0.5095,
0,
0.3612,
0.7249,
-0.1725,
0,
0.296,
0,
0,
0,
-0.2263,
0,
0.7783,
0,
-0.4767,
-0.4419,
0,
0,
0.4588,
0.2263,
0.7003,
-0.4215,
-0.4019,
0.2263,
0.2975,
0.2263,
0.0613,
-0.2144,
0,
0.5859,
-0.3818,
0,
0.2263,
0.5106,
0.4215,
-0.7271,
0.4215,
0.8047,
0.4404,
0.5362,
0.4939,
-0.2263,
0.7783,
0,
-0.2263,
0,
-0.5994,
-0.1725,
0.4625,
0.743,
0,
0,
0,
-0.6486,
-0.2732,
0.7096,
0.431,
-0.34,
-0.5423,
0,
0,
-0.3818,
0.5994,
0,
0.5719,
0,
0.9114,
-0.0258,
0.3182,
0.2263,
0,
0,
0.5859,
0,
0,
0,
-0.168,
0,
-0.2263,
0,
0.2263,
0,
-0.1725,
0,
0,
-0.4404,
0.5859,
0,
0,
0,
0.0772,
0,
0.5859,
-0.1725,
0,
0,
-0.5859,
-0.0521,
0,
-0.3404,
0.25,
0.9341,
0,
-0.2144,
-0.2732,
0.7783,
0,
0,
0.4625,
0.9229,
0,
0,
0.4625,
0.4625,
0,
0,
-0.2183,
0,
-0.6486,
0,
0,
0,
0.2263,
-0.2263,
0,
0.4404,
0,
0,
-0.2732,
-0.1531,
0,
0.1779,
-0.1725,
0.373,
0.8225,
0,
0.4625,
0.2263,
-0.5849,
0,
0,
0,
-0.2263,
-0.2263,
0,
0.9196,
0.4625,
0.837,
0,
-0.2263,
0,
-0.264,
0,
-0.7034,
-0.9062,
0.7615,
0,
0,
-0.1725,
0.7371,
-0.3274,
-0.0258,
0,
-0.8693,
-0.5859,
0,
0.4625,
-0.2144,
-0.2732,
0.8118,
-0.1725,
0,
0.5267,
0.2263,
0.5719,
0,
-0.296,
-0.3843,
0.7844,
0.7844,
0,
-0.7293,
0.8118,
0,
0.3612,
0.8326,
0.4767,
-0.2144,
0.9229,
0.4404,
0,
0,
0,
0,
0.1779,
0,
0.7615,
0.7184,
0.3333,
0.2263,
0,
0.5574,
-0.93,
0,
-0.168,
0.5894,
0,
0.4404,
0,
-0.5574,
-0.2263,
0,
-0.5859,
0.2263,
0.5719,
0.5859,
-0.7667,
0,
0,
0,
-0.1531,
-0.3811,
0,
-0.1531,
0.7946,
-0.1725,
0,
0,
0,
0.7783,
-0.2263,
-0.1531,
-0.1725,
0.3736,
0.5128,
0,
-0.1725,
0.6198,
0,
0.4588,
0,
0,
-0.6808,
0,
0,
0.829,
-0.3119,
0.2263,
0,
-0.2561,
0.4625,
-0.6786,
-0.1761,
0,
0,
0,
0,
-0.5081,
0.7371,
0.4625,
-0.1531,
-0.2263,
0.7684,
0,
-0.1725,
0.4084,
-0.7783,
0.6908,
0.2263,
-0.3142,
0.6669,
0.8326,
0,
0.6808,
0,
-0.1725,
0,
-0.1725,
0.8326,
0.7783,
0.9269,
-0.2263,
0.4153,
0.4019,
0.656,
-0.168,
0.5128,
0,
0.0258,
0.4215,
0.3182,
0.3612,
-0.1725,
0,
0,
-0.34,
-0.6808,
0.6841,
0.4625,
0.296,
0,
0,
0,
-0.1725,
-0.2263,
-0.6037,
0.2263,
0,
0.4215,
0,
0.4404,
0,
0,
-0.168];

// A formatter for counts.
var formatCount = d3.format(",.0f");

// Sets the margins
var margin = {top: 40, right: 30, bottom: 60, left: 30},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

// Round the minimum year down to the nearest .25 and the maximum score up to the 
// nearest .25
var max = Math.ceil(d3.max(years) / .25) * .25;
var min = Math.floor(d3.min(years) / .25) * .25;
var x = d3.scale.linear()
      .domain([min, max])
      .range([0, width]);

// Generate a histogram using bins of length .25.
var data = d3.layout.histogram()
      .bins(d3.range(min, max, .25))
    (years);

// Set the bar coloring
var yMax = d3.max(data, function(d){return d.length});
var yMin = d3.min(data, function(d){return d.length});
var colorScale = d3.scale.linear()
            .domain([yMin, yMax])
            .range([d3.rgb(color).brighter(), d3.rgb(color).darker()]);

var y = d3.scale.linear()
    .domain([0, yMax])
    .range([height, 0]);

// Ensure the axis uses 50 year increments
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickValues(d3.range(min, max, .25));

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var bar = svg.selectAll(".bar")
    .data(data)
  .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; });

bar.append("rect")
    .attr("x", 1)
    .attr("width", (x(data[0].dx) - x(0)) - 1)
    .attr("height", function(d) { return height - y(d.y); })
    .attr("fill", function(d) { return colorScale(d.y) });

bar.append("text")
    .attr("dy", ".75em")
    .attr("y", -12)
    .attr("x", (x(data[0].dx) - x(0)) / 2)
    .attr("text-anchor", "middle")
    .text(function(d) { return formatCount(d.y); });

svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

// Graph title
svg.append("text")
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top / 2))
        .attr("text-anchor", "middle")  
        .style("font-size", "16px") 
        .text("Snapped Compound Sentiment Scores");

// Axis label
svg.append("text")
    .attr("class", "x label")
    .attr("text-anchor", "middle")
    .attr("x", width / 2)
    .attr("y", height + 50)
    .text("Compound Score");


</script>